(function(e){function a(){var a=p[c];0==c&&e(".gil-update-wrapper").fadeIn(r).css("display","table"),a&&(t(a),s(a),c++)}function t(t){if(t&&t.action){var s={action:t.action};t.parameters&&"object"==typeof t.parameters&&s.push(t.parameters),e.ajax({url:ajaxurl,method:"POST",data:s,success:function(t){console.log(t),t.success?(a(),t.date&&t.string_date&&e(".time-ago").data("timeago",null).attr("datetime",t.date).text(t.string_date).timeago(),t.size&&e(".gil-size").text(t.size)):n(t.exception)}})}return!1}function s(a){e(a.class).siblings(":visible").length>0?e(a.class).siblings(":visible").css("transform","translate3d(0, "+l+", 0)").fadeOut(o,function(){a.finish&&e(".gil-update-wrapper .animation").fadeOut(o/2).css("transform","translate3d(0, -"+l+", 0)"),e(a.class).fadeIn(o).css("transform","translate3d(0, 0px, 0)")}):(a.finish&&e(".gil-update-wrapper .animation").fadeOut(o/2).css("transform","translate3d(0, -"+l+", 0)"),e(a.class).fadeIn(o).css("transform","translate3d(0, 0px, 0)"))}function i(){c=0,e(".gil-update-wrapper .animation, .gil-update-wrapper .process > div, .bookshelf_wrapper").removeAttr("style"),e(".bookshelf_wrapper").removeClass("paused")}function n(a){e(".bookshelf_wrapper").addClass("paused"),e(".process .failure").siblings(":visible").css("transform","translate3d(0, "+l+", 0)").fadeOut(o,function(){console.log(u[a]),e(".process .failure .exception").text(u[a]),e(".process .failure").fadeIn(o).css("transform","translate3d(0, 0px, 0)")})}var r=250,o=400,l="40px",c=0,p=[{action:"geo_ip_get_library",class:".downloading"},{action:"geo_ip_extract_library",class:".decompressing"},{action:"geo_ip_update_latest",class:".done",finish:!0}],u={FILE_DOWNLOAD:"Something went wrong while attempting to download from source. Try again later.",FILE_SIZE:"It seems that source library is updating itself, give it a try later.",FILE_EXTRACTION:"There was something weird while trying to unzip the source file. Try again in a few minutes.",FILE_NOT_FOUND:"Huh! The library source was suppose to be found, but is not! Check for writing and reading permissions and try it again."};e(document).ready(function(){"Never"!=e(".time-ago").text()&&e(".time-ago").timeago(),e(".update").on("click",function(){return a()}),e(".gil-close").on("click",function(){return e(".gil-update-wrapper").fadeOut(r,function(){i()}),!1})})})(jQuery);